---
import Layout from "./Layout.astro";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, description, pubDate, updatedDate, heroImage, tags, author } = post.data;
---

<Layout title={title} description={description}>
  <main class="px-4 py-8 max-w-4xl mx-auto">
    <!-- Breadcrumb -->
    <nav class="mb-8">
      <ol class="flex items-center space-x-2 text-sm text-holy-neutral">
        <li><a href="/" class="hover:text-holy-action transition-colors">Inicio</a></li>
        <li>/</li>
        <li><a href="/blog" class="hover:text-holy-action transition-colors">Blog</a></li>
        <li>/</li>
        <li class="text-holy-text-primary">{title}</li>
      </ol>
    </nav>

    <!-- Hero Section -->
    <header class="mb-12">
      {heroImage && (
        <img 
          src={heroImage} 
          alt={title}
          class="w-full h-64 md:h-96 object-cover rounded-2xl mb-8 shadow-xl"
        />
      )}
      
      <div class="space-y-4">
        <h1 class="font-heading text-4xl md:text-5xl font-bold text-holy-text-primary leading-tight">
          {title}
        </h1>
        
        <p class="text-xl text-holy-neutral leading-relaxed">
          {description}
        </p>
        
        <div class="flex flex-wrap items-center gap-4 text-sm text-holy-text-secondary">
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-holy-action rounded-full"></span>
            <span>Por {author}</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="w-2 h-2 bg-holy-action rounded-full"></span>
            <time datetime={pubDate.toISOString()}>
              {pubDate.toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
              })}
            </time>
          </div>
          {updatedDate && (
            <div class="flex items-center gap-2">
              <span class="w-2 h-2 bg-holy-action rounded-full"></span>
              <span>Actualizado el {updatedDate.toLocaleDateString('es-ES')}</span>
            </div>
          )}
        </div>
        
        {tags && tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mt-4">
            {tags.map((tag) => (
              <span class="px-3 py-1 bg-holy-dark-secondary/50 text-holy-action rounded-full text-sm border border-holy-action/20">
                #{tag}
              </span>
            ))}
          </div>
        )}
      </div>
    </header>

    <!-- Content -->
    <article class="prose prose-lg prose-invert max-w-none">
      <slot />
    </article>

    <!-- Footer -->
    <footer class="mt-16 pt-8 border-t border-holy-neutral/20">
      <div class="bg-holy-dark-secondary/30 backdrop-blur-sm rounded-2xl p-6 border border-holy-action/20">
        <h3 class="font-heading text-xl font-semibold text-holy-text-primary mb-4">
          ¿Te gustó este artículo?
        </h3>
        <p class="text-holy-neutral mb-6">
          Comparte tu feedback, haz preguntas o cuéntanos sobre tu experiencia. 
          En The Holy Code nos encanta la conversación sobre desarrollo y tecnología.
        </p>
        <div class="flex flex-wrap gap-4">
          <a 
            href="mailto:mauro@holy-code.com?subject=Comentario sobre: {title}"
            class="inline-flex items-center gap-2 px-4 py-2 bg-holy-action hover:bg-holy-action/90 text-holy-text-primary rounded-full font-semibold transition-all duration-300 hover:scale-105"
          >
            Enviar comentario
          </a>
          <a 
            href="https://linkedin.com/in/mesanchez91"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 px-4 py-2 bg-holy-dark-secondary hover:bg-holy-dark-secondary/80 text-holy-text-primary rounded-full font-semibold transition-all duration-300 hover:scale-105 border border-holy-neutral/20"
          >
            Conectar en LinkedIn
          </a>
        </div>
      </div>
    </footer>
  </main>
</Layout>

<style>
  .prose {
    @apply text-holy-neutral;
  }
  
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    @apply text-holy-text-primary font-heading;
  }
  
  .prose a {
    @apply text-holy-action hover:text-holy-action/80 transition-colors;
  }
  
  .prose strong {
    @apply text-holy-text-primary font-semibold;
  }
  
  .prose code {
    @apply bg-holy-dark-secondary/50 text-holy-action px-1.5 py-0.5 rounded text-sm;
  }
  
  .prose pre {
    @apply bg-holy-dark-secondary/80 border border-holy-neutral/20 rounded-lg;
  }
  
  .prose pre code {
    @apply bg-transparent text-holy-text-primary px-0 py-0;
  }
  
  .prose blockquote {
    @apply border-l-4 border-holy-action pl-4 italic text-holy-text-secondary;
  }
  
  .prose table {
    @apply border-collapse border border-holy-neutral/20;
  }
  
  .prose th, .prose td {
    @apply border border-holy-neutral/20 px-4 py-2;
  }
  
  .prose th {
    @apply bg-holy-dark-secondary/50 text-holy-text-primary font-semibold;
  }
  
  .prose ul, .prose ol {
    @apply space-y-2;
  }
  
  .prose li {
    @apply text-holy-neutral;
  }
</style> 